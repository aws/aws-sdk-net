// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 15.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace ServiceClientGenerator.Generators.Marshallers
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "15.0.0.0")]
    public partial class JsonRPCRequestMarshaller : JsonRPCStructureMarshaller
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	AddLicenseHeader();

	AddCommonUsingStatements();

            
            #line default
            #line hidden
            this.Write("\nusing ThirdParty.Json.LitJson;\n\nnamespace ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.Namespace));
            
            #line default
            #line hidden
            this.Write(".Model.Internal.MarshallTransformations\n{\n\t/// <summary>\n\t/// ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write(" Request Marshaller\n\t/// </summary>       \n\tpublic class ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("RequestMarshaller : IMarshaller<IRequest, ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write(@"Request> , IMarshaller<IRequest,AmazonWebServiceRequest>
	{
        /// <summary>
        /// Marshaller the request object to the HTTP request.
        /// </summary>  
        /// <param name=""input""></param>
        /// <returns></returns>
		public IRequest Marshall(AmazonWebServiceRequest input)
        {
            return this.Marshall((");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("Request)input);\n        }\n\n        /// <summary>\n        /// Marshaller the reque" +
                    "st object to the HTTP request.\n        /// </summary>  \n        /// <param name=" +
                    "\"publicRequest\"></param>\n        /// <returns></returns>\n\t\tpublic IRequest Marsh" +
                    "all(");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("Request publicRequest)\n\t\t{\n\t\t\tIRequest request = new DefaultRequest(publicRequest" +
                    ", \"");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.Namespace));
            
            #line default
            #line hidden
            this.Write("\");\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
 if(!string.IsNullOrEmpty(this.Config.ServiceModel.TargetPrefix))
	{
            
            #line default
            #line hidden
            this.Write("\n\t\t\tstring target = \"");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.ServiceModel.TargetPrefix));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("\";\n\t\t\trequest.Headers[\"X-Amz-Target\"] = target;\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	}
	if(this.Operation.HttpMethod != "GET" && this.Operation.HttpMethod != "DELETE")
	{

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.Headers[\"Content-Type\"] = \"application/x-amz-json-");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.ServiceModel.JsonVersion));
            
            #line default
            #line hidden
            this.Write("\";\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	}

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.HttpMethod = \"");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.HttpMethod));
            
            #line default
            #line hidden
            this.Write("\";\n\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	var requestStructure = this.Operation.RequestStructure;
	
    // Generates code to add members of the request to the request being created by the marshaller
	ProcessRequestUri(this.Operation);
	ProcessUriMembers("publicRequest", this.Operation);
	ProcessQueryStringMembers("publicRequest", this.Operation);

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.ResourcePath = uriResourcePath;\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
    
    var payload= this.Operation.RequestPayloadMember;
    var shouldMarshallPayload = (payload != null && payload.IsStructure);
	// Process any members which are marshalled as part of the request body
	if(this.Operation.RequestHasBodyMembers || shouldMarshallPayload)
	{

            
            #line default
            #line hidden
            this.Write("\n\t\t\tusing (StringWriter stringWriter = new StringWriter(CultureInfo.InvariantCult" +
                    "ure))\n\t\t\t{\n\t\t\t\tJsonWriter writer = new JsonWriter(stringWriter);\n\t\t\t\twriter.Writ" +
                    "eObjectStart();\n                var context = new JsonMarshallerContext(request," +
                    " writer);\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
		
		if(shouldMarshallPayload)	
		{
            ProcessRequestPayloadMember(0, "publicRequest." + this.Operation.RequestPayloadMember.PropertyName, this.Operation.RequestPayloadMember.Shape);
		}
		else
		{
			ProcessMembers(1, "publicRequest", this.Operation.RequestBodyMembers);
		}

            
            #line default
            #line hidden
            this.Write("\n\t\t\n\t\t\t\twriter.WriteObjectEnd();\n\t\t\t\tstring snippet = stringWriter.ToString();\n\t\t" +
                    "\t\trequest.Content = System.Text.Encoding.UTF8.GetBytes(snippet);\n\t\t\t}\n\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	}
    else if (payload != null)
    {

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.ContentStream =  publicRequest.");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(payload.PropertyName));
            
            #line default
            #line hidden
            this.Write(" ?? new MemoryStream();\n\t\t\trequest.Headers[Amazon.Util.HeaderKeys.ContentLengthHe" +
                    "ader] =  \n\t\t\t\trequest.ContentStream.Length.ToString(CultureInfo.InvariantCulture" +
                    ");\n\t\t\trequest.Headers[Amazon.Util.HeaderKeys.ContentTypeHeader] = \"binary/octet-" +
                    "stream\";\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

    }
	else if (this.Config.ServiceModel.Type == ServiceType.Json)
	{

            
            #line default
            #line hidden
            this.Write("\n            request.Content = System.Text.Encoding.UTF8.GetBytes(\"{}\");\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"

	}

	ProcessHeaderMembers("publicRequest", this.Operation.RequestHeaderMembers);		

	// If there aren't any members that are marshalled as part of the body or streamed	
	if(this.Operation.UseQueryString)
	{

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.UseQueryString = true;\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
	}

            
            #line default
            #line hidden
            this.Write("\n\n\t\t\treturn request;\n\t\t}\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\JsonRPCRequestMarshaller.tt"
				
		this.AddRequestSingletonMethod();

            
            #line default
            #line hidden
            this.Write("\n\t}\n}\n");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
}
