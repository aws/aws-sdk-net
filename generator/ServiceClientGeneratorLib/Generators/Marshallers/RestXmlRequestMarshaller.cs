// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 15.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace ServiceClientGenerator.Generators.Marshallers
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "15.0.0.0")]
    public partial class RestXmlRequestMarshaller : BaseRequestMarshaller
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            this.Write("\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

	AddLicenseHeader();
	
	AddCommonUsingStatements();

            
            #line default
            #line hidden
            this.Write("\nusing System.Xml;\n\nnamespace ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.Namespace));
            
            #line default
            #line hidden
            this.Write(".Model.Internal.MarshallTransformations\n{\n\t/// <summary>\n\t/// ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write(" Request Marshaller\n\t/// </summary>       \n\tpublic class ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("RequestMarshaller : IMarshaller<IRequest, ");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write(@"Request> , IMarshaller<IRequest,AmazonWebServiceRequest>
	{
        /// <summary>
        /// Marshaller the request object to the HTTP request.
        /// </summary>  
        /// <param name=""input""></param>
        /// <returns></returns>
		public IRequest Marshall(AmazonWebServiceRequest input)
        {
            return this.Marshall((");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("Request)input);\n        }\n\n        /// <summary>\n        /// Marshaller the reque" +
                    "st object to the HTTP request.\n        /// </summary>  \n        /// <param name=" +
                    "\"publicRequest\"></param>\n        /// <returns></returns>\n\t\tpublic IRequest Marsh" +
                    "all(");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.Name));
            
            #line default
            #line hidden
            this.Write("Request publicRequest)\n\t\t{\n\t\t\tvar request = new DefaultRequest(publicRequest, \"");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Config.Namespace));
            
            #line default
            #line hidden
            this.Write("\");\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

	// Assign HttpMethod if present or default to POST
	if(!string.IsNullOrWhiteSpace(this.Operation.HttpMethod)){		

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.HttpMethod = \"");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.Operation.HttpMethod));
            
            #line default
            #line hidden
            this.Write("\";\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

	}
	var requestStructure = this.Operation.RequestStructure;
    var payload = this.Operation.RequestPayloadMember;
    var shouldMarshallPayload = (payload != null && payload.IsStructure);

    // This block adds members of the request object to the actual request
	ProcessRequestUri(this.Operation);
	ProcessHeaderMembers("publicRequest", this.Operation.RequestHeaderMembers);		
	ProcessUriMembers("publicRequest", this.Operation);
	ProcessQueryStringMembers("publicRequest", this.Operation);

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.ResourcePath = uriResourcePath;\n\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
   
	// Process any members which are marshalled as part of the request body
	if(this.Operation.RequestHasBodyMembers || shouldMarshallPayload)
	{
		ProcessRequestBodyMembers("publicRequest", this.Operation);		
	}

            
            #line default
            #line hidden
            this.Write("\n\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

	// If there aren't any members that are marshalled as part of the body or streamed	
	if(this.Operation.UseQueryString)
	{

            
            #line default
            #line hidden
            this.Write("\n\t\t\trequest.UseQueryString = true;\n");
            
            #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
	}	

            
            #line default
            #line hidden
            this.Write("\n\t\t\treturn request;\n\t\t}\n\n\t\t\n\t}\t\n}\n\n");
            return this.GenerationEnvironment.ToString();
        }
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"


	void ProcessRequestBodyMembers(string variableName, Operation operation)
	{

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\tvar stringWriter = new StringWriter(CultureInfo.InvariantCulture);\n\t\t\tusing (" +
        "var xmlWriter = XmlWriter.Create(stringWriter, new XmlWriterSettings() { Encodin" +
        "g = System.Text.Encoding.UTF8, OmitXmlDeclaration = true }))\n\t\t\t{   \n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

		if(operation.RequestPayloadMember==null)
		{

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\txmlWriter.WriteStartElement(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(operation.Input.LocationName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(operation.XmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\");\t\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

		}
		else
		{

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\txmlWriter.WriteStartElement(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(operation.RequestPayloadMember.MarshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(operation.XmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\");\t\t\t\t\t\t\t\t\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

		}
		var childmembers = operation.RequestPayloadMember == null ? operation.RequestBodyMembers : operation.RequestPayloadMember.Shape.Members;
		variableName = operation.RequestPayloadMember == null ? variableName : variableName + "." + operation.RequestPayloadMember.PropertyName;
		foreach(var member in childmembers)
		{
			if(member.IsIdempotent)
			{
			    throw new Exception("Idempotency Token feature is not supported");
			}
			if(member.IsStructure)
			{
				ProcessStructure(variableName, member, operation.XmlNamespace);				
			}
			else if(member.IsList)
			{
				ProcessList(variableName, member, operation.XmlNamespace);
			}
			else if(member.IsMap)
			{
				throw new NotImplementedException();
			}
			else
			{

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\tif(");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".IsSet");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.PropertyName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("())\n\t\t\t\t\txmlWriter.WriteElementString(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.MarshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(operation.XmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", StringUtils.From");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.GetPrimitiveType()));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("(");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.PropertyName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("));\t\t\t\t\t\n\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

			}
			
		}  

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(@"

				xmlWriter.WriteEndElement();
			}
			try 
			{
				string content = stringWriter.ToString();
				request.Content = System.Text.Encoding.UTF8.GetBytes(content);
				request.Headers[""Content-Type""] = ""application/xml"";
			} 
			catch (EncoderFallbackException e) 
			{
				throw new AmazonServiceException(""Unable to marshall request to XML"", e);
			}
");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
				       
	}

	void ProcessMembers(string variableName, IEnumerable<Member> members, string xmlNamespace)
	{
		foreach(var member in members)
		{
			if(member.IsStructure)
			{
				ProcessStructure(variableName, member, xmlNamespace);				
			}
			else if(member.IsList)
			{
				ProcessList(variableName, member, xmlNamespace);	
			}
			else if(member.IsMap)
			{
				throw new NotImplementedException();
			}
			else
			{

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\tif(");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".IsSet");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.PropertyName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("())\n\t\t\t\t\txmlWriter.WriteElementString(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.MarshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(xmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", StringUtils.From");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.GetPrimitiveType()));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("(");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.PropertyName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("));\t\t\t\t \n\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

			}
		}
	}

	void ProcessStructure(string variableName, Member member, string xmlNamespace)
	{
			var shape = member.Shape.IsList ?  member.Shape.ListShape : member.Shape ;
			variableName = member.Shape.IsList ? variableName : variableName + "." + member.PropertyName;

			// Use shape's ListMarshallName if the structure is a list.
			var marshallName = member.Shape.IsList ? member.Shape.ListMarshallName : member.MarshallName;

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\t\t\t\t\n\t\t\t\tif (");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(" != null) \n\t\t\t\t{\n\t\t\t\t\txmlWriter.WriteStartElement(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(marshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(xmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\");\t\t\t\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

			PushIndent("	");
			ProcessMembers(variableName, shape.Members, xmlNamespace);
			PopIndent();

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\t\txmlWriter.WriteEndElement();\n\t\t\t\t}\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
		
	}

	void ProcessList(string variableName, Member member, string xmlNamespace)
	{
				var listVariable = (variableName + member.PropertyName).Replace(".",string.Empty);
				var listItemVariable = (variableName + member.PropertyName).Replace(".",string.Empty) + "Value";

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\tvar ");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(" = ");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(variableName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.PropertyName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(";\n\t\t\t\tif (");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(" != null && ");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(".Count > 0) \n\t\t\t\t{\t\t\t\t\t\t\n\t\t\t\t\txmlWriter.WriteStartElement(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.MarshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(xmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\");\n\t\t\t\t\tforeach (var ");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listItemVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(" in ");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(") \n\t\t\t\t\t{\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"

			PushIndent("	");			
			if(member.Shape.ListShape.IsStructure)
			{
					ProcessStructure(listItemVariable, member, xmlNamespace);	
			}
			else
			{
					// Use shape's ListMarshallName as it's a list structure.

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\t\txmlWriter.WriteStartElement(\"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(member.Shape.ListMarshallName));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\", \"");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(xmlNamespace));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\");\n                    xmlWriter.WriteValue(");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(listItemVariable));

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write(");\n                    xmlWriter.WriteEndElement();\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
				
			}
			PopIndent();			

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
this.Write("\n\t\t\t\t\t}\t\t\t\n\t\t\t\t\txmlWriter.WriteEndElement();\t\t\t\n\t\t\t\t}\n");

        
        #line default
        #line hidden
        
        #line 1 "C:\p\aws-sdk-net\generator\ServiceClientGeneratorLib\Generators\Marshallers\RestXmlRequestMarshaller.tt"
				

		this.AddRequestSingletonMethod();
	}

        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
